var BoPattern=function(){"use strict";var a=[],b=function(b){var c={"default":{fillColor:"#042037",borderColor:"#323232",borderAlpha:.7,borderHighlight:"#A3B3A3"},objects:{background:[],foreground:[],overlay:[]},debug:!1,user:{mousePosition:{x:0,y:0}},data:{},grid:[[]]};if("undefined"==typeof window||"undefined"==typeof window.HTMLCanvasElement)throw"[BoPattern.js] Sorry but your browser doesn't support the canvas element!";if(!msngr.exist(b)||msngr.isEmptyString(b))throw"[BoPattern.js] Sorry but you supplied me with invalid input! What do you expect me to do with that!?";switch(msngr.getType(b)){case"[object String]":var d=msngr.findElement(b);"[object HTMLCanvasElement]"!==msngr.getType(d)?(c.canvas=document.createElement("canvas"),d.appendChild(c.canvas)):c.canvas=d;break;case"[object HTMLCanvasElement]":c.canvas=b;break;default:if(!msngr.isHtmlElement(b))throw"[BoPattern.js] Sorry but you supplied me with invalid input! What do you expect me to do with that!?";c.canvas=document.createElement("canvas"),b.appendChild(c.canvas)}if(c.context2D=c.canvas.getContext("2d"),!msngr.exist(c.canvas)||!msngr.exist(c.context2D))throw"[BoPattern.js] Welp you passed the first set of validators but I still failed to get the canvas :(";c.parent=c.canvas.parentNode;for(var e={},f=0;f<a.length;++f){var g=a[f];"[object Function]"===Object.prototype.toString.call(g)&&(g=g(c)),e=msngr.merge(g,e)}return Object.defineProperty(e,"debug",{set:function(a){c.debug=a,a===!0&&(c.clearObjects("overlay"),c.addObject("overlay",c.BoDebug())),a===!1&&c.clearObjects("overlay")},get:function(){return c.debug}}),c.random=function(a,b){return Math.random()*(b-a)+a},c.addObject=function(a,b){msngr.exist(b)&&msngr.exist(b.render)&&c.objects[a].push(b)},c.clearObjects=function(a){(c.objects[a]||[]).splice(0,(c.objects[a]||[]).length)},e};return b.extend=function(b){a.push(b)},b}();BoPattern.extend(function(a){"use strict";var b,c=!0,d=function(b,c){for(var d=a.objects[b].length,e=0;d>e;++e)c.beginPath(),a.objects[b][e].render(c),c.closePath()},e=function(){var f=a.context2D;f.clearRect(0,0,a.canvas.width,a.canvas.height),d("background",f),d("foreground",f),d("overlay",f),c&&(b=window.requestAnimationFrame(e))};a.startRendering=function(){c=!0,e()},a.stopRendering=function(){c=!1,(window.cancelAnimationFrame||window.mozCancelAnimationFrame)(b)}}),BoPattern.extend(function(a){"use strict";var b=!0,c=function(b,c){for(var d=a.objects[b].length,e=0;d>e;++e)a.objects[b][e].update()},d=function(){b&&(a.canvas.width=a.parent.getBoundingClientRect().width,a.canvas.height=a.parent.getBoundingClientRect().height,c("background"),c("foreground"),c("overlay"))};a.canvas.addEventListener("mousemove",function(d){if(b){var e=a.canvas.getBoundingClientRect();a.user.mousePosition={x:d.clientX-e.left,y:d.clientY-e.top},c("background"),c("foreground"),c("overlay")}}),d(),window.addEventListener("resize",d,!1),a.startUpdating=function(){b=!0},a.stopUpdating=function(){b=!1}}),BoPattern.extend(function(a){"use strict";return a.BoDebug=function(){return{render:function(b){if(a.debug){b.font="16pt Calibri",b.fillStyle="black";var c="X: "+Math.floor(a.user.mousePosition.x)+" Y: "+Math.floor(a.user.mousePosition.y),d=b.measureText(c);b.fillText(c,a.canvas.width-d.width,20)}},update:function(){}}},{}}),BoPattern.extend(function(a){"use strict";return a.BoTile=function(b){if(!msngr.exist(b)||!msngr.exists(b.value,b.label,b.position))throw"[BoPattern.js] Invalid parameters supplied to BoTile";var c,d=msngr.copy(b),e=void 0,f=void 0,g={},h={render:function(b){(c!==a.BoTile.States.initializing||void 0!==e)&&(b.beginPath(),b.fillStyle=d.borderHighlight||a["default"].borderColor,b.lineWidth=d.borderThickness||1,b.globalAlpha=d.borderAlpha,b.strokeRect(d.x,d.y,d.width,d.height),b.closePath(),b.beginPath(),b.fillStyle=a["default"].fillColor,b.globalAlpha=d.alpha,b.fillRect(d.x,d.y,d.width,d.height),b.closePath())},update:function(){if(c!==a.BoTile.States.initializing||void 0!==e){var b=a.canvas.width/a.data.maxFirstDimension,i=a.canvas.height/a.data.maxSecondDimension;d.x=b*d.position[0],d.y=i*d.position[1],d.width=b,d.height=i;var j=!1;a.user.mousePosition.x>=d.x&&a.user.mousePosition.x<=d.x+1*d.width&&a.user.mousePosition.y>=d.y&&(j=a.user.mousePosition.y<=d.y+1*d.height?!0:!1),j?(d.borderThickness=5,d.borderHighlight=a["default"].borderHighlight):(d.borderThickness=void 0,d.borderHighlight=void 0),e===a.BoTile.States.loading&&(void 0===f&&(f=0,g.alpha=d.alpha,g.borderAlpha=d.borderAlpha),f>=100?(h.state=a.BoTile.States.shown,d.alpha=g.alpha,delete g.alpha,d.borderAlpha=g.borderAlpha,delete g.borderAlpha,f=void 0):(f+=10,d.alpha=f/100*g.alpha,d.borderAlpha=f/100*g.borderAlpha,setTimeout(h.update,a.random(10,75)))),e===a.BoTile.States.unloading&&(void 0===f&&(f=100),0>=f?(h.state=a.BoTile.States.unloaded,f=void 0):(f-=10,d.alpha=f/100*d.alpha,d.borderAlpha=f/100*d.borderAlpha,setTimeout(h.update,a.random(10,75))))}}};return Object.defineProperty(h,"state",{get:function(){return c},set:function(b){switch(b){case a.BoTile.States.initializing:c=a.BoTile.States.initializing,d.borderAlpha=a["default"].borderAlpha,e=void 0;break;case a.BoTile.States.loading:e=a.BoTile.States.loading,d.alpha=d.value/a.data.maxValue,h.update();break;case a.BoTile.States.shown:c=a.BoTile.States.shown,e=void 0,h.update();break;case a.BoTile.States.unloading:e=a.BoTile.States.unloading,h.update();break;case a.BoTile.States.unloaded:c=a.BoTile.States.unloaded,e=void 0,a.objects.background.splice(a.objects.background.indexOf(h),1)}}}),h.state=a.BoTile.States.initializing,h},a.BoTile.States={initializing:"initializing",loading:"loading",shown:"shown",unloading:"unloading",unloaded:"unloaded"},{}}),BoPattern.extend(function(a){"use strict";return{load:function(b,c){if(c=c||0,msngr.exist(b)){for(var d=a.objects.background.length,e=0;d>e;++e)a.objects.background[e].state=a.BoTile.States.unloading;var f=function(){if(a.objects.background.length>0)setTimeout(f,5);else{for(var c=void 0,d=void 0,e=b.length,g=void 0,h=[],i=b.length,j=0;i>j;++j)for(var k=b[j].length,l=0;k>l;++l){var m=b[j][l],n=a.BoTile(msngr.merge(m,{position:[j,l]}));h.push(n),(void 0===c||m.value<c)&&(c=m.value),(void 0===d||m.value>d)&&(d=m.value),(void 0===g||l>g)&&(g=l)}a.clearObjects("background"),a.data.raw=b,a.stopUpdating(),a.stopRendering(),a.data.minValue=c,a.data.maxValue=d,a.data.maxFirstDimension=e,a.data.maxSecondDimension=g,a.objects.background=h,a.startUpdating(),a.startRendering();for(var o=a.objects.background.length,j=0;o>j;++j)a.objects.background[j].state=a.BoTile.States.loading}};f()}}}});